<div id="expense_edit_modal" class="modal fade" role="dialog">    <div class="modal-dialog">        <form role="form" id="expenseCategory_e">            <div class="modal-content">                                <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal">&times;</button>                    <h4 class="modal-title">Edit Expense</h4>                </div>                <div class="modal-body">                    <!-- <div id="l">                        <h1 class="ml8"><span class="letters-container"> <span class="letters letters-left"><img src="<?php echo base_url('assets/'); ?>images/loader-icon.png" width="40px"></span></span><span class="circle circle-white"></span><span class="circle circle-dark"></span><span class="circle circle-container"><span class="circle circle-dark-dashed"></span></span></h1>                    </div> -->                     <div id="loader_coco">                        <h1 class="ml8">                            <span class="letters-container">                                <span class="letters letters-left">                                    <img src="<?php echo base_url('assets/'); ?>images/loader-icon.png" width="40px">                                </span>                            </span>                            <span class="circle circle-white"></span>                            <span class="circle circle-dark"></span>                            <span class="circle circle-container">                            <span class="circle circle-dark-dashed"></span>                            </span></h1>                    </div>                    <div class="row">                        <div class="col-md-12">                            <div class="form-group">                                <label for="group_title"><!-- Supplier Name -->                                    Expense Title                                    <span class="validation-color">*</span>                                </label>                                <input type="hidden" name="expense_id" id="expense_id" value="">                                <input type="text" class="form-control" id="expense_name_e" name="expense_name_e" value="">                                <span class="validation-color" id="err_expense_name_e"></span>                            </div>                        </div>                        <div class="col-md-12">                            <div class="form-group col-sm-6 pl-0">                                <label for="group_ledger"><!-- Supplier Name -->                                    Expense Ledger                                </label>                                <input type="text" class="form-control" id="expense_ledger_e" name="expense_ledger_e" value="">                                <input type="hidden" name="ledger_id_e" id="ledger_id_e">                                <span class="validation-color" id="err_expense_ledger_e"></span>                            </div>                            <div class="form-group col-sm-6 produc_hsn pl-0">                                <label for="product_hsn_sac_code">Expense HSN/SAC Code</label>                                <div class="input-group">                                    <div class="input-group-addon">                                        <a href="" data-toggle="modal" data-target="#hsn_modal" class="pull-right"><span class="fa fa-eye"></span></a>                                    </div>                                    <input type="text" class="form-control" id="product_hsn_sac_code" name="product_hsn_sac_code" value="" tabindex="11">                                </div>                                <span class="validation-color" id="err_product_hsn_sac_code"><?php echo form_error('product_hsn_sac_code'); ?></span>                            </div>                        </div>                        <div class="col-md-12">                            <div class="form-group">                                <label for="group_title"><!-- Supplier Name -->                                    Expense Description                                    <span class="validation-color"></span>                                </label>                                <textarea class="form-control" rows="3" id="expense_description_e" name="expense_description_e"></textarea>                                <span class="validation-color" id="err_expense_description_e"></span>                            </div>                        </div>                          </div>                </div>                <div class="modal-footer">                    <button type="submit" id="expense_edit_submit" class="btn btn-info btn-flat" class="close" data-dismiss="modal">Update</button>                    <button type="submit" class="btn btn-info btn-flat" class="close" data-dismiss="modal">Cancel</button>                </div>                            </div>        </form>    </div></div><?php/*$this ->load -> view('product/tds_modal');*/?><script src="<?php echo base_url('assets/js/') ?>icon-loader.js"></script><script type="text/javascript">    $(document).on("click", ".edit_button", function () {        var id = $(this).data('id');        var section = $(this).data('section');        $('#section').val(section);        $('#expense_id').val(id);        $.ajax({            url: base_url + 'expense/get_expense_ajax/' + id,            dataType: 'JSON',            method: 'POST',            success: function (result) {                $('#expense_name_e').val(result.expense_title);                $('#expense_edit_modal [name=product_hsn_sac_code]').val(result.expense_hsn_code);                $('#expense_ledger_e').val(result.ledger_name);                $('#expense_description_e').val(result.expense_description);                $('#expense_tds_e').val(result.expense_tds);                $('#product_tds_code_e').val(result.expense_tds_value);                $('#tds_id_e').val(result.expense_tds_id);                $('#ledger_id_e').val(result.ledger_id);            }        });    });</script><script type="text/javascript">    $(document).ready(function () {        var expense_name_e_exist = 0;        $("#expense_edit_submit").click(function (event){            var expense_id = $('#expense_id').val();            var expense_name_e = $('#expense_name_e').val();            if (expense_name_e_exist == 1)            {                $("#err_expense_name_e").text(expense_name_e + " name already exists!");                return !1;            }            if (expense_name_e == null || expense_name_e == "")            {                $("#err_expense_name_e").text("Please Enter Expense Title.");                return !1;            } else            {                $("#err_expense_name_e").text("");            }            if (!expense_name_e.match(general_regex))            {                $('#err_expense_name_e').text("Please Enter Valid Expense Name ");                return !1;            } else            {                $("#err_expense_name_e").text("");            }            var expense_description = $('#expense_description_e').val();            var expense_ledger = $('#expense_ledger_e').val();             $.ajax({                url: base_url + 'expense/edit_expense_ajax/' + expense_id,                dataType: 'JSON',                method: 'POST',                data: {                    'expense_name': $('#expense_name_e').val(),                    'expense_ledger' : expense_ledger,                    'expense_hsn_code' : $('#expense_edit_modal #product_hsn_sac_code').val(),                    'expense_description' : expense_description,                    'expense_tds': $('#expense_tds_e').val(),                    'expense_tds_id': $('#tds_id_e').val(),                    'expense_tds_value': $('#product_tds_code_e').val(),                    'ledger_id': $('#ledger_id_e').val()                },                beforeSend: function(){                    // Show image container                    $("#expense_edit_modal #loader_coco").show();                },                success: function (result) {                    setTimeout(function () {// wait for 5 secs(2)                        $(document).find('[name=check_item]').trigger('change');                        //location.reload(); // then reload the page.(3)                    },500);                   $("#expense_edit_modal #loader_coco").hide();                    if(result.flag){                        dTable.destroy();                        dTable = GetAllExpences();                        alert_d.text = result.msg;                        PNotify.success(alert_d);                    }else{                        $("#loader_coco").hide();                        alert_d.text = result.msg;                        PNotify.error(alert_d);                    }                }            });        });        $("#expense_name_e").on("blur", function (event)        {            var expense_name_e = $('#expense_name_e').val();            var ledger_id = $('#ledger_id_e').val();            var expense_id = $('#expense_id').val();            if (expense_name_e.length > 2)            {                if (expense_name_e == null || expense_name_e == "")                {                    $("#err_expense_name_e").text("Please Enter Expense Name.");                    return !1;                } else                {                    $("#err_expense_name_e").text("");                }                if (!expense_name_e.match(general_regex))                {                    $('#err_expense_name_e').text("Please Enter Valid Expense Name ");                    return !1;                } else                {                    $("#err_expense_name_e").text("");                }            } else            {                $("#err_expense_name_e").text("");            }            $.ajax({                url: base_url + 'ledger/get_check_ledger',                dataType: 'JSON',                method: 'POST',                data: {'ledger_name': expense_name_e,'expense_id': expense_id},                success: function (result) {                    if (result[0].num > 0)                    {                        $('#expense_name_e').val("");                        $("#err_expense_name_e").text(expense_name_e + " name already exists!");                    } else                    {                        $("#err_expense_name_e").text("");                    }                }            });        });        $("#expense_name_e").on("keyup", function (event) {            var expense_name_e = $('#expense_name_e').val();            var ledger_id = $('#ledger_id_e').val();            var expense_id = $('#expense_id').val();            $.ajax({                url: base_url + 'ledger/get_check_ledger',                dataType: 'JSON',                method: 'POST',                data: {                    'ledger_name': expense_name_e,                    'ledger_id': ledger_id,                    'expense_id': expense_id                },                success: function (result) {                    if (result[0].num > 0)                    {                        $("#err_expense_name_e").text(expense_name_e + " name already exists!");                        expense_name_e_exist = 1;                    } else                    {                        $("#err_expense_name_e").text("");                        expense_name_e_exist = 0;                    }                }            });        });    });</script>