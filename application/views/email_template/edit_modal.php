<div id="edit_modal" class="modal fade" role="dialog" data-backdrop="static">    <div class="modal-dialog">        <!-- Modal content-->        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal">&times;</button>                <h4><!-- <?php echo $this->lang->line('product_hsn_sac_lookup'); ?> -->                   Edit Email Template                </h4>            </div>                <div id="loader_coco">                        <h1 class="ml8">                            <span class="letters-container">                                <span class="letters letters-left">                                    <img src="<?php echo base_url('assets/'); ?>images/loader-icon.png" width="40px">                                </span>                            </span>                            <span class="circle circle-white"></span>                            <span class="circle circle-dark"></span>                            <span class="circle circle-container">                            </span></h1>                </div>                         <div class="control-group">                    <div class="controls">                        <div class="tabbable">                            <div class="box-body">                                <div class="row">                                    <form id="templateForm_e">                                        <div class="col-md-12">                                            <div class="form-group">                                                <label for="module_id">Select Module<span style="color:red;">*</span></label>                                                <select class="form-control select2" id="module_id_e" name="module_id_e" style="width: 100%;">                                                </select>                                                <span class="validation-color" id="err_module_id_e"><?php echo form_error('module_id_e'); ?></span>                                            </div>                                            <div class="form-group">                                                <label for="email_template_name">Email Template Name<span style="color:red;">*</span></label>                                                <input type="text" class="form-control" id="email_template_name_e" name="email_template_name_e" value="">                                                <span class="validation-color" id="err_email_template_name_e"><?php echo form_error('email_template_name_e'); ?></span>                                            </div>                                            <div class="form-group">                                                <label for="subject">Subject<span style="color:red;">*</span></label>                                                <input type="text" class="form-control" id="subject_e" name="subject_e" value="">                                                <span class="validation-color" id="err_subject_e"><?php echo form_error('subject_e'); ?></span>                                            </div>                                            <div class="form-group message_box" >                                                <label for="message">Message<span style="color:red;">*</span></label>                                                <textarea class="form-control" id="message_e" rows="5" name="message_e"></textarea>                                                <span class="validation-color" id="err_message_e"><?php echo form_error('message_e'); ?></span>                                            </div>                                            <div class="form-group signature_box">                                                <label for="signature">Signature<span style="color:red;">*</span></label>                                                <textarea class="form-control" id="signature_e" rows="5" name="signature_e"></textarea>                                                <span class="validation-color" id="err_signature_e"><?php echo form_error('signature_e'); ?></span>                                            </div>                                        </div>                                        <div class="col-sm-12">                                            <button type="submit" id="email_edit_submit" class="btn btn-info pull-right" class="close" data-dismiss="modal"> Update                                             </button>                                        </div>                                    </form>                                </div>                                <!-- /.box-body -->                            </div>                        </div>                    </div>                </div> <!-- /controls -->            </div> <!-- /control-group -->        </div>    </div></div><script src="<?php echo base_url('assets/js/') ?>icon-loader.js"></script><script type="text/javascript">    $(document).ready(function () {                var id = 0;        $(document).on("click", '.edit_template', function (e) {            id = $(this).data('id');            $.ajax({                url: base_url + "email_template/get_email_template",                type: "POST",                data: {                    id: id                },                dataType: "json",                success: function (data) {                    $('#module_id_e').html("");                    var option = "<option value=''>Select</option>";                    for (var i = 0; i < data['module'].length; i++) {                        if (data['module'][i].module_id == data['data'][0].module_id) {                            option += "<option value='" + data['module'][i].module_id + "' selected>" + data['module'][i].module_name + "</option>";                        } else {                            option += "<option value='" + data['module'][i].module_id + "'>" + data['module'][i].module_name + "</option>";                        }                    }                    $('#module_id_e').html(option);                    $('#email_template_name_e').val(data['data'][0].email_template_name);                    $('#subject_e').val(data['data'][0].subject);                    var message = data['data'][0].message.replace(/\n|\\n|\r\n|\\r\\n/g, "\n");                   // $('#message_e').val(message);                    console.log(message,$('.message_box').find('iframe .wysihtml5-editor'));                   // return false;                   $('.message_box').find('.wysihtml5-sandbox').contents().find('.wysihtml5-editor').html(message);                    //$('#message_e').contents().find('').html(message);                    var signature = data['data'][0].signature.replace(/\n|\\n|\r\n|\\r\\n/g, "\n");                   // $('#signature_e').val(signature);                    $('.signature_box').find('.wysihtml5-sandbox').contents().find('.wysihtml5-editor').html(signature);                }            });        });        $("#email_edit_submit").click(function (event) {            var module_id = $('#module_id_e').val();            var template_name = $('#email_template_name_e').val();            var subject = $('#subject_e').val();            var message = $('#message_e').val();            var signature = $('#signature_e').val();            if (module_id == null || module_id == "") {                $("#err_module_id_e").text("Please select any module");                return false;            } else {                $('#err_module_id_e').text("");            }            if (template_name == null || template_name == "") {                $("#err_email_template_name_e").text("Please enter email template name");                return false;            } else {                $('#err_email_template_name_e').text("");            }            if (subject == null || subject == "") {                $("#err_subject_e").text("Please enter subject");                return false;            } else {                $('#err_subject_e').text("");            }            if (message == null || message == "") {                $("#err_message_e").text("Please enter message");                return false;            } else {                $("#err_message_e").text("");            }            if (signature == null || signature == "") {                $("#err_signature_e").text("Please enter signature");                return false;            } else {                $('#err_signature_e').text("");            }            $("#loader_coco").show();            $.ajax({                url: base_url + "email_template/edit_email_template/" + id,                type: "POST",                dataType: "json",                data: {                    module_id: $("#module_id_e").val(),                    email_template_name: $("#email_template_name_e").val(),                    subject: $("#subject_e").val(),                    message: $("#message_e").val(),                    signature: $("#signature_e").val()                },                /*beforeSend: function(){                     // Show image container                    $("#loader").show(500);                }, */                success: function (data) {                    setTimeout(function () {// wait for 5 secs(2)                        $(document).find('[name=check_item]').trigger('change');                        //location.reload(); // then reload the page.(3)                    },500);                    if(data.flag){                        dTable.destroy();                        dTable = getAllEmailTemplate();                        alert_d.text = data.msg;                        PNotify.success(alert_d);                        $("#loader_coco").hide();                    }else{                        alert_d.text = data.msg;                        PNotify.error(alert_d);                    }                                    }            });        });        $("#message_e").wysihtml5();        $("#signature_e").wysihtml5();    });</script>